# 🗂️ 存档与数据

## 自动存档

游戏每隔 **30 秒**自动保存一次进度到浏览器的 `localStorage`。

- 关闭标签页或刷新页面时，下次打开游戏会自动读取最近的存档
- 自动存档与手动存档使用同一个存储槽位

<div class="warning">
⚠️ localStorage 是浏览器本地存储，清除浏览器缓存/数据时存档会一并删除！建议定期导出备份。
</div>

---

## 手动存档

点击左侧快捷栏的**手动存档（💾）**按钮，可立即将当前状态写入 localStorage。

- 快捷键：`S`
- 存档成功后界面会有短暂的提示反馈

---

## 召回存档

点击左侧快捷栏的**召回存档（📂）**按钮，从上一次手动/自动存档恢复游戏状态。

<div class="info">
📌 召回操作会覆盖当前未保存的进度，谨慎操作。
</div>

---

## 导入导出

在**设置面板 → 数据管理**中可进行存档的文本化导入导出。

### 导出存档

1. 打开设置面板
2. 点击「导出存档」
3. 将弹出的文本字符串复制保存（记事本、云端文档均可）

### 导入存档

1. 打开设置面板
2. 点击「导入存档」
3. 粘贴之前导出的存档字符串
4. 确认后游戏会重载并恢复到该存档状态

<div class="tip">
💡 换设备游玩时，先在原设备导出存档，在新设备粘贴导入即可无缝迁移进度。
</div>

---

## 重置游戏

在**设置面板 → 数据管理**中可重置全部游戏数据，回到初始状态。

<div class="danger">
⛔ 此操作不可撤销，且会清除本地所有存档。执行前务必先导出存档！
</div>

---

## 存档数据结构（开发参考）

存档以 JSON 字符串形式存储，主要包含以下字段：

```json
{
  "resources": {
    "coins": 1000,
    "food": 500,
    "materials": 200,
    "research": 150,
    "energy": 80
  },
  "monsters": [...],
  "farm": { "plots": [...] },
  "buildings": { ... },
  "technologies": { ... },
  "explorations": { "totalCount": 12, ... },
  "version": "0.x.x"
}
```
