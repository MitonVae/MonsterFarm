// ==================== 怪兽命名库 ====================
// 组合式命名：前缀 + 种族词根 + 后缀
// 命名与怪兽的稀有度、属性倾向（力量/敏捷/智力/耕作）高度相关
// 组合数量：前缀~80 × 词根~60 × 后缀~60 ≈ 288,000+ 种组合

var MONSTER_NAME_DB = (function() {

    // ── 按「属性倾向」分类的形容词前缀 ──
    var PREFIX = {
        // 力量型（strength > 4）
        strength: [
            '钢铁','磐石','重锤','铁壁','怒吼','碎岩','破甲',
            '雷霆','蛮勇','狂暴','炽热','铸铁','不屈','威猛',
            '压制','沉默','重甲','熔岩','炼狱','震地'
        ],
        // 敏捷型（agility > 4）
        agility: [
            '疾风','闪光','银翼','流星','迅影','轻羽','电弧',
            '霜雾','急旋','鬼步','极速','微风','穿云','虹影',
            '飞鸿','银箭','时影','烟尘','灵巧','羽落'
        ],
        // 智力型（intelligence > 4）
        intelligence: [
            '古典','苍穹','星纹','晨曦','深渊','秘法','混沌',
            '幻术','沉思','蒼穹','神秘','智辉','奥义','梦幻',
            '星尘','光辉','破晓','玄机','暗语','灵感'
        ],
        // 耕作型（farming > 4）
        farming: [
            '翠绿','丰收','嫩芽','沃土','甜露','暖阳','晨雾',
            '金穗','田园','草木','繁茂','温柔','纯真','芬芳',
            '绿意','雨润','甘甜','茁壮','新生','朝露'
        ],
        // 通用/平衡型
        common: [
            '流浪','孤影','迷途','奇特','古老','年幼','稚嫩',
            '迷雾','幽暗','清晨','黄昏','午夜','深秋','初夏',
            '苍茫','漫游','寂静','执着','好奇','随性'
        ]
    };

    // ── 按「怪兽种类」绑定的核心词根 ──
    var ROOTS = {
        // 史莱姆系
        slime:      ['凝脂','冻冻','软软','嗷嗷','黏黏','团团','圆滚','噗噗','果冻','啾啾'],
        // 哥布林系
        goblin:     ['嘎嘎','咕哝','呼哧','嗒嗒','嗯哼','咕噜','嘿嘿','吭哧','呼噜','呜呜'],
        // 嫩芽精
        sprout:     ['嫩嫩','青青','芽芽','绿绿','叶叶','豆豆','苗苗','萌萌','小草','花花'],
        // 泥蟹
        mudcrab:    ['钳钳','嚓嚓','泥泥','硬壳','横行','蹬蹬','横横','翻翻','铁甲','嗦嗦'],
        // 萤火虫
        firefly:    ['闪闪','明明','亮亮','灯灯','星星','点点','飘飘','忽忽','荧荧','光光'],
        // 石子精
        pebble:     ['硬硬','圆圆','咕噜','滚滚','石石','平平','粒粒','碎碎','砰砰','哐哐'],
        // 精灵
        sprite:     ['悠悠','叮叮','零零','璃璃','银银','晶晶','鸣鸣','叶叶','精精','灵灵'],
        // 石像鬼
        golem:      ['咚咚','轰轰','重重','磐磐','铁铁','嗡嗡','踏踏','沉沉','巨巨','稳稳'],
        // 幽灵
        wisp:       ['幽幽','飘飘','虚虚','渺渺','雾雾','暗暗','冷冷','寒寒','魂魂','空空'],
        // 叶人
        leafkin:    ['绿绿','叶叶','茂茂','蓬蓬','藤藤','芽芽','林林','草草','木木','枝枝'],
        // 岩背龟
        stoneback:  ['壳壳','硬硬','缩缩','慢慢','厚厚','背背','岩岩','龟龟','藏藏','稳稳'],
        // 风精灵
        windsprite: ['呼呼','嗖嗖','旋旋','飞飞','风风','卷卷','涡涡','穿穿','轻轻','快快'],
        // 火元素
        ifrit:      ['焰焰','炎炎','烁烁','灼灼','烈烈','热热','燃燃','火火','赤赤','烫烫'],
        // 深藓怪
        deepmoss:   ['苔苔','湿湿','深深','暗暗','绒绒','沼沼','菇菇','幽幽','密密','蔓蔓'],
        // 水晶兽
        crystal:    ['晶晶','棱棱','透透','冰冰','碎碎','亮亮','棱棱','清清','纯纯','折折'],
        // 毒蛙
        toxfrog:    ['呱呱','毒毒','蹦蹦','跳跳','绿绿','湿湿','滑滑','鼓鼓','嗒嗒','咕嗒'],
        // 暗影
        shadow:     ['暗暗','幽幽','黑黑','虚虚','消消','匿匿','淡淡','冥冥','寂寂','空空'],
        // 石灰魔像
        ashgolem:   ['灰灰','尘尘','沙沙','扑扑','碎碎','烟烟','余余','落落','散散','蒙蒙'],
        // 雷鸟
        thunderbird:['鸣鸣','炸炸','轰轰','嗖嗖','裂裂','闪闪','劈劈','嘶嘶','抖抖','震震'],
        // 深海克拉肯
        deepkraken: ['触触','卷卷','黑黑','深深','拉拉','湿湿','咕咕','旋旋','涌涌','沉沉'],
        // 虚空行者
        voidwalker: ['空空','零零','无无','虚虚','断断','渺渺','越越','透透','穿穿','彼彼'],
        // 凤凰
        phoenix:    ['燃燃','羽羽','炽炽','红红','复复','烈烈','辉辉','灿灿','烧烧','升升'],
        // 铁甲守卫
        ironwarden: ['铁铁','刚刚','守守','卫卫','硬硬','不不','动动','护护','甲甲','坚坚'],
        // 古老者
        ancient:    ['久久','远远','悠悠','沧沧','深深','旧旧','缓缓','沉沉','古古','绵绵'],
        // 天界使者
        celestial:  ['圣圣','光光','辉辉','耀耀','灵灵','纯纯','柔柔','洁洁','白白','明明'],
        // 泰坦
        titan:      ['巨巨','大大','撼撼','压压','碎碎','轰轰','重重','破破','裂裂','磅磅'],
        // 虚空裂缝幽灵
        spiritking: ['霸霸','王王','凛凛','尊尊','傲傲','冠冠','皇皇','领领','统统','绝绝'],
        // 世界树精
        worldtree:  ['茂茂','根根','绿绿','枝枝','高高','深深','生生','长长','荫荫','永永'],
        // 时间幽灵
        timeghost:  ['流流','逝逝','旧旧','老老','慢慢','快快','先先','后后','过过','岁岁'],
        // 泥怪（通用fallback）
        _default:   ['奇奇','怪怪','呜呜','嗯嗯','哦哦','啊啊','哈哈','嘻嘻','咦咦','呀呀']
    };

    // ── 按「稀有度」分类的后缀 ──
    var SUFFIX = {
        common: [
            '小子','宝宝','崽崽','小鬼','家伙','小样','破壳','菜鸟',
            '笨蛋','小团','一号','二号','新兵','小弟','普普','平凡'
        ],
        uncommon: [
            '选手','达人','先锋','骑士','勇士','探索者','流浪者',
            '新星','使者','护卫','前辈','行者','修行者','进阶','觉醒'
        ],
        rare: [
            '王者','精英','翘楚','悍将','猛士','术士','贤者',
            '领袖','守护者','征服者','传承者','纵横','无双','盖世'
        ],
        epic: [
            '神将','霸主','圣者','至尊','鬼才','不世','弑神',
            '无冕','雄霸','震世','混沌之子','千古','绝代','绝世'
        ],
        legendary: [
            '永恒','无极','混沌主','万界之王','时空主宰','创世',
            '不朽','太古','神主','全能','无名者','天地之源','命运织者'
        ]
    };

    // ── 属性倾向判断 ──
    function getStatBias(stats) {
        var s = stats.strength || 0;
        var a = stats.agility  || 0;
        var i = stats.intelligence || 0;
        var f = stats.farming  || 0;
        var max = Math.max(s, a, i, f);
        if (max <= 3) return 'common';
        if (max === s) return 'strength';
        if (max === a) return 'agility';
        if (max === i) return 'intelligence';
        return 'farming';
    }

    // ── 从数组随机取一项（可用 seed 让繁殖后代有一定稳定性）──
    function pick(arr, seed) {
        if (!arr || arr.length === 0) return '';
        var idx = seed !== undefined
            ? Math.abs(seed) % arr.length
            : Math.floor(Math.random() * arr.length);
        return arr[idx];
    }

    // ── 核心：生成怪兽名字 ──
    // @param type     怪兽类型 id（如 'slime'）
    // @param stats    属性对象 { strength, agility, intelligence, farming }
    // @param rarity   稀有度字符串（'common'|'uncommon'|'rare'|'epic'|'legendary'）
    // @param seed     可选整数 seed，相同 seed 产生相同名字
    function generateMonsterName(type, stats, rarity) {
        var bias    = getStatBias(stats || {});
        var prefArr = PREFIX[bias] || PREFIX.common;
        var rootArr = ROOTS[type]  || ROOTS._default;
        var sufArr  = SUFFIX[rarity] || SUFFIX.common;

        var prefix  = pick(prefArr);
        var root    = pick(rootArr);
        var suffix  = pick(sufArr);

        // 少数情况（10%）省略前缀，让名字更短更可爱
        if (Math.random() < 0.1) {
            return root + suffix;
        }
        // 少数情况（5%）前缀叠加另一个前缀，增加史诗感
        if (rarity === 'legendary' || rarity === 'epic') {
            if (Math.random() < 0.3) {
                var prefix2 = pick(prefArr);
                if (prefix2 !== prefix) {
                    return prefix + root + '·' + prefix2 + suffix;
                }
            }
        }

        return prefix + root + suffix;
    }

    // ── 公开 API ──
    return {
        generate: generateMonsterName,
        // 供调试/预览用
        _PREFIX: PREFIX,
        _ROOTS:  ROOTS,
        _SUFFIX: SUFFIX
    };
})();
